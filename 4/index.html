<!DOCTYPE html>
<html lang="it">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login / SignUp</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <!--Form Login-->
  <div id="login" class="auth-card">
    <h1>Accedi</h1>
    <form action="login.php" method="POST">
    <!-- Email input -->
    <div class="form-row">
      <label class="form-label" for="form2Example1">Email address</label>
      <input type="email" name="email" id="form2Example1" class="form-control" />
    </div>

    <!-- Password input -->
    <div class="form-row">
      <label class="form-label" for="form2Example2">Password</label>
      <input type="password" name="password" id="form2Example2" class="form-control" />
    </div>

    <div class="form-row">
      <button class="btn" type="submit">Login</button>
    </div>
  </form>
  <div class="row-actions">
    <div class="small">Non hai un account?</div>
    <button class="toggle-btn" onclick="ToggleLogin('login')">SignUp</button>
  </div>
  </div>
  </div>



  <!--Form Signup-->
  <div id="signUp" class="auth-card" hidden>
    <h1>Registrati</h1>
    <form action="SignUp.php" method="POST">
    <!-- Email input -->
    <div class="form-row">
      <label class="form-label" for="form2Example1">Email address</label>
      <input type="email" name="email" id="form2Example1" class="form-control" />
    </div>

    <!-- Password input -->
    <div class="form-row">
      <label class="form-label" for="pswd">Password</label>
      <input type="password" name="password" id="pswd" class="form-control" oninput="CheckPasswords()" />
    </div>

    <!-- Password Verification input -->
    <div class="form-row">
      <label class="form-label" for="pswd2">Verifica Password</label>
      <input type="password" id="pswd2" class="form-control" oninput="CheckPasswords()" />
    </div>

    <div class="form-row">
      <button id="SignUpBtn" class="btn disabled" type="submit">SignUp</button>
    </div>
  </form>
  <div class="row-actions">
    <div class="small">Gi√† registrato?</div>
    <button class="toggle-btn" onclick="ToggleLogin('signUp')">Login</button>
  </div>
  </div>
  </div>

  <script>
    let btn = document.getElementById("SignUpBtn")
    document.getElementById('login').addEventListener('submit', function (event) {
      fetch('login.php', {
        method: 'POST',
        body: new FormData(event.target)
      }).then(response => response.text()).then(data => {
        console.log(data);
      })
    });

    function CheckPasswords(){
      let pswd = document.getElementById("pswd").value;
      let pswd2 = document.getElementById("pswd2").value;

      if(pswd === pswd2){
        btn.classList.remove("disabled")
      }else{
        btn.classList.add("disabled")
      }
    }

    function ToggleLogin(hide){
      let signUp = document.getElementById("signUp");
      let login = document.getElementById("login");
      switch(hide){
        case "login":
          login.hidden = true;
          signUp.hidden = false;
          break;
        case "signUp":
          login.hidden = false;
          signUp.hidden = true;
          break;
      }


    }

  </script>
  <!--CDN di Bootstrap-->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
    integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
    crossorigin="anonymous"></script>
</body>

</html>